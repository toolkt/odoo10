<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <menuitem id="menu_dmpi_central_main_config" name="DMPI" web_icon="dmpi_po_central,static/description/icon.png" sequence="-1"/> 

<!-- PO Settings -->     
    <menuitem id="dmpi_menu_sale_config" name="Sale Settings" parent="menu_dmpi_central_main_config" sequence="6" />
    <menuitem id="dmpi_menu_sale_po_config" name="PO Settings" parent="menu_dmpi_central_main_config" sequence="6" />

<!-- Plant Configuration --> 
    <record id="dmpi_plant_action" model="ir.actions.act_window">
        <field name="name">Plant</field>
        <field name="res_model">dmpi.plant</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
              Click to add a new Record.
            </p><p>
              Plant
            </p>
        </field>
    </record>

    <record id="dmpi_plant_tree" model="ir.ui.view">
        <field name="name">dmpi.plant.tree</field>
        <field name="model">dmpi.plant</field>
        <field name="arch" type="xml">
            <tree string="Plant" editable="top">
              <field name="name"/>
              <field name="description"/>
            </tree>
        </field>
    </record>


    <menuitem action="dmpi_plant_action" id="menu_dmpi_plant_action" name="Plant" parent="dmpi_menu_sale_po_config" sequence="7" />
                

    <!-- PO Allocation --> 
    <record id="dmpi_dist_po_allocation_action" model="ir.actions.act_window">
        <field name="name">Plant</field>
        <field name="res_model">dmpi.dist.po.allocation</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to add a new Record.
          </p><p>
            PO Allocation
          </p>
        </field>
    </record>

    <record id="dmpi_dist_po_allocation_tree" model="ir.ui.view">
        <field name="name">dmpi.dist.po.allocation.tree</field>
        <field name="model">dmpi.dist.po.allocation</field>
        <field name="arch" type="xml">
            <tree string="Po Allocation">
                <field name="name"/>
                <field name="database_id"/>
                <field name="date_start"/>
                <field name="date_end"/>
            </tree>
        </field>
    </record>

    <record id="dmpi_dist_po_allocation_form" model="ir.ui.view">
        <field name="name">dmpi.dist.po.allocation.form</field>
        <field name="model">dmpi.dist.po.allocation</field>
        <field name="arch" type="xml">
            <form string="Po Allocation">
                <group>
                    <field name="name"/>
                    <field name="database_id"/>
                    <field name="date_start"/>
                    <field name="date_end"/>
                </group>
                <field name="allocation_line_ids">
                    <tree editable='bottom'>
                        <field name="product_id"/>
                        <field name="plant_id"/>
                        <field name="allocation"/>
                        <field name="deliver_source"/>
                        <field name="critical"/>
                    </tree>
                </field>
            </form>
        </field>
    </record>

    <menuitem action="dmpi_dist_po_allocation_action" id="menu_dmpi_dist_po_allocation_action" name="PO Allocation" parent="dmpi_menu_sale_po_config" sequence="9" />
   

    <!-- PO Allocation Line--> 
    <record id="dmpi_dist_po_allocation_line_action" model="ir.actions.act_window">
        <field name="name">Allocation Line</field>
        <field name="res_model">dmpi.dist.po.allocation.line</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to add a new Record.
          </p><p>
            PO Allocation
          </p>
        </field>
    </record>

    <record id="dmpi_dist_po_allocation_line_tree" model="ir.ui.view">
        <field name="name">dmpi.dist.po.allocation.line.tree</field>
        <field name="model">dmpi.dist.po.allocation.line</field>
        <field name="arch" type="xml">
            <tree string="Po Allocation" editable='bottom'>
                <field name="product_id"/>
                <field name="plant_id"/>
                <field name="allocation"/>
                <field name="deliver_source"/>
                <field name="critical"/>
                <!-- MOVED TO PRODUCT TEMPLATE
                <field name="weight"/>
                <field name="cases_pa"/>
                <field name="cases_cv"/>
                <field name="cases_tw"/>
                -->
            </tree>
        </field>
    </record>

    <menuitem action="dmpi_dist_po_allocation_line_action" id="menu_dmpi_dist_po_allocation_line_action" name="PO Allocation Line" parent="dmpi_menu_sale_po_config" sequence="9" />


    <!-- STOCK RETURN REASON -->
    <record id="action_stock_return_reason_form" model="ir.actions.act_window">
        <field name="name">Return Reason</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">stock.return.reason</field>
        <field name="view_type">form</field>
    </record>

    <record id="view_stock_return_reason_tree" model="ir.ui.view">
        <field name="name">stock.return.reason.tree</field>
        <field name="model">stock.return.reason</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Stock Return Reason" editable="bottom">
                <field name="rid"/>
                <field name="return_type"/>
                <field name="name"/>
                <field name="code"/>
            </tree>
        </field>
    </record>



    <menuitem action="action_stock_return_reason_form" id="menu_action_incoterm_open" parent="dmpi_menu_sale_config" name="Return Reason" sequence="10"/>


    <!-- DMPI PRICELIST --> 
    <record id="dmpi_product_pricelist_action" model="ir.actions.act_window">
        <field name="name">Plant</field>
        <field name="res_model">dmpi.product.pricelist</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to add a new Record.
          </p><p>
            Product Pricelist
          </p>
        </field>
    </record>

    <record id="dmpi_product_pricelist_tree" model="ir.ui.view">
        <field name="name">dmpi.product.pricelist.tree</field>
        <field name="model">dmpi.product.pricelist</field>
        <field name="arch" type="xml">
            <tree string="Po Allocation">
                <field name="name"/>
                <field name="date_start"/>
                <field name="date_end"/>
                <field name="type"/>
                <field name="active"/>
            </tree>
        </field>
    </record>

    <record id="dmpi_product_pricelist_form" model="ir.ui.view">
        <field name="name">dmpi.product.pricelist.form</field>
        <field name="model">dmpi.product.pricelist</field>
        <field name="arch" type="xml">
            <form string="Product Pricelist">
                <group>
                    <field name="name"/>
                    <field name="date_start"/>
                    <field name="date_end"/>
                    <field name="type"/>
                    <field name="active"/>
                </group>
                <field name="items">
                    <tree editable='bottom'>
                        <field name="sequence"/>
                        <field name="product_id"/>
                        <field name="unit_price"/>
                        <field name="default"/>
                    </tree>
                </field>
            </form>
        </field>
    </record>

    <menuitem action="dmpi_product_pricelist_action" id="menu_dmpi_product_pricelist_action" name="Pricelist" parent="dmpi_menu_sale_config" sequence="9" />


    
<!--
    <record id="view_product_pricelist_tree" model="ir.ui.view">
        <field name="name">product.pricelist.tree.inherit</field>
        <field name="model">product.pricelist</field>
        <field name="inherit_id" ref="product.product_pricelist_view_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="after">
                <field name='type'/>
                <field name='include_sync'/>
            </xpath>
        </field>
    </record>

    <record id="view_product_pricelist_form" model="ir.ui.view">
        <field name="name">product.pricelist.inherit</field>
        <field name="model">product.pricelist</field>
        <field name="inherit_id" ref="product.product_pricelist_view"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/group/field[@name='country_group_ids']" position="after">
                <group>
                    <field name='date_start'/>
                    <field name='date_end'/>
                    <button name="apply_date" string="Apply Date to Line Items" type="object" class="oe_highlight"/>
                </group>
                <group>
                    <field name='type'/>
                    <field name='include_sync'/>
                </group>
            </xpath>
        </field>
    </record>
-->


    <!-- -->
    <record id="view_template_property_form" model="ir.ui.view">
        <field name="name">product.template.dmpi.central</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='barcode']" position="after">
                    <field name="cases_pa"/>
                    <field name="cases_cv"/>
                    <field name="cases_tw"/>
                    <!--<field name="critical"/>-->
            </xpath>

      </field>
    </record>  


    <record id="dmpi_action_tax_form" model="ir.actions.act_window">
        <field name="name">Taxes</field>
        <field name="res_model">account.tax</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="domain" eval="False"/> <!-- Force empty -->
        <field name="context">{'search_default_sale': True, 'search_default_purchase': True}</field>
    </record>
    <menuitem action="dmpi_action_tax_form" id="menu_dmpi_action_tax_form" parent="dmpi_menu_sale_config" sequence="1"/>

    <record id="dmpi_action_product_form" model="ir.actions.act_window">
        <field name="name">Products</field>
        <field name="res_model">product.template</field>
        <field name="view_type">form</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'default_type': 'product'}</field>
    </record>
    <menuitem action="dmpi_action_product_form" id="menu_dmpi_action_product_form" parent="dmpi_menu_sale_config" sequence="1"/>





</odoo>