<?xml version="1.0" encoding="utf-8"?>
<odoo>


    <menuitem  id="dmpi_menu_database_config" name="Database Settings" parent="menu_dmpi_central_main_config" sequence="5" />

<!-- DIST DATABASE VIEW-->

    <record id="action_res_distributor_database_form" model="ir.actions.act_window">
        <field name="name">Databases</field>
        <field name="res_model">res.distributor.database</field>
        <field name="view_type">form</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="view_res_distributor_database_form" model="ir.ui.view">
        <field name="name">res.distributor.database.form</field>
        <field name="model">res.distributor.database</field>
        <field name="arch" type="xml">
            <form string="Database">
                <sheet>

                    <div class="oe_button_box" name="button_box">
                        <button name="toggle_active" type="object" class="oe_stat_button" icon="fa-archive">
                            <field name="active" widget="boolean_button" options="{&quot;terminology&quot;: &quot;archive&quot;}"/>
                        </button>
                        <button name="sync_data" icon="fa-database" class="oe_stat_button" string="Sync Data" type="object" />
                        <button name="sync_company_settings" icon="fa-gears" class="oe_stat_button" string="Sync Settings" type="object" />
                    </div>

                    <group col="4">
                        <field name="name"/>
                        <field name="partner_id"/>
                        <field name="database"/>
                        <field name="dist_channel"/>
                        <field name="live"/>
                        <field name="show_error"/>
                    </group>
                    <notebook>
                        <page name="dmpi_settings" string="Distributor Server">
                            <group>
                                <group>
                                    <field name="remote_host"/>
                                    <field name="xmlrpc_user"/>
                                    <field name="postgres_user"/>
                                    <field name="ssh_user"/>
                                </group>
                                <group>
                                    <field name="remote_port"/>
                                    <field name="xmlrpc_pass"/>
                                    <field name="postgres_pass"/>
                                    <field name="ssh_pass"/>
                                </group>
                            </group>
                        </page>
                        <page name="dmpi_settings" string="DMPI Settings">
                            <group>
                                <group string="Cut-off">
                                    <field name="cutoff_start"/>
                                    <field name="cutoff_end"/>
                                    <field name="cutoff"/>
                                    <field name="cutoff_msg"/>
                                </group>

                                <group string="Upload Settings">
                                    <field name="upload_sales_enable"/>
                                    <field name="upload_returns_enable"/>
                                    <field name="upload_partner_enable"/>
                                    <field name="upload_partner_reclass_enable"/>
                                </group>
                            </group>
                        </page>
                        <page name="po_settings" string="PO Settings">
                            <group>
                                <group string="Po Settings">
                                    <field name="bypass_load_limit"/>
                                    <field name="bypass_load_limit_off_shore"/>
                                    <field name="inland_sdd"/>
                                    <field name="offshore_sdd"/>
                                    <button name="apply_to_all_po" icon="fa-refresh" class="oe_stat_button" string="Set to All" confirm="All records will have these same settings" type="object" />
                                </group>   

                                <group string="Weight Configuration">
                                    <field name="max_truck_load_weight_kg"/>
                                    <field name="max_van_load_weight_kg"/>
                                    <button name="apply_to_all_wc" icon="fa-refresh" class="oe_stat_button" string="Set to All" confirm="All records will have these same settings" type="object" />
                                </group>

                                <group string="Volume Configuration">
                                    <field name="max_truck_load"/>
                                    <field name="min_truck_load"/>
                                    <button name="apply_to_all_vc" icon="fa-refresh" class="oe_stat_button" string="Set to All" confirm="All records will have these same settings" type="object" />
                                </group>

                                <group string="Load Configuration">
                                    <field name="max_truck_load_weight"/>
                                    <field name="min_truck_load_weight"/>
                                    <button name="apply_to_all_lc" icon="fa-refresh" class="oe_stat_button" string="Set to All" confirm="All records will have these same settings" type="object" />
                                </group>

                            </group>

                            <group string="PO Automation Server Credentials">
                                <group>
                                    <field name="central_db"/>
                                    <field name="central_host"/>
                                    <field name="central_port"/>  
                                    <button name="apply_to_all_po_automation" icon="fa-refresh" class="oe_stat_button" string="Set to All" confirm="All records will have these same settings" type="object" />  
                                </group>
                                <group>
                                    <field name="distributor_db"/>
                                    <field name="central_user"/>
                                    <field name="central_pass"/> 
                                </group>
                            </group> 
                 
                        </page>

                        <page name="database_settings" string="Database Settings">
                            <span><br/></span>    
                            <div class="oe_button_box" name="button_box">
                                <button name="restart_distributor_server" string="Restart" confirm="This will restart the server of the Distributor" type="object"  icon="fa-refresh" class="oe_stat_button" />
                                <button name="upload_module" string="Upload" confirm="This will upload the Listed Modules to the Distributor Database" type="object"  icon="fa-cloud-upload" class="oe_stat_button" />
                                <button name="upgrade_module" string="Upgrade" confirm="This will Upgrade the Listed Modules in the Distributor" type="object" icon="fa-refresh" class="oe_stat_button" />
                                <button name="clear_pricelist" string="Fix Pricelist" confirm="This will clear the pricelist of the Distributor" type="object" icon="fa-dollar" class="oe_stat_button" />
                                <button name="change_distributor_root_password" string="Set Password" confirm="The password of the Root account of the distributor will be changed" type="object" icon="fa-lock" class="oe_stat_button" />
                            </div>  


                            <group>
                                <field name="distributor_root_password"/>
                                <field name="module_dir" />
                            </group>
                            <field name="module_ids" />
                        </page>
                        <page string="Schedule">
                            <field name="schedule_ids">
                                <tree editable='top'>
                                    <field name="schedule_date" />
                                    <field name="name" />
                                    <field name="schedule_status" />
                                </tree>
                            </field>                            
                        </page>
                    </notebook>

                    <separator string="Server Log"/>
                    <group>
                        <group>
                            <field name="log_date" readonly="1"/>
                        </group>
                        <group>
                            <field name="log_status" readonly="1"/>
                        </group>
                    </group>

                    <field name="log_ids">
                        <tree editable='top'>
                            <field name="log_date" />
                            <field name="name" />
                            <field name="log_status" />
                        </tree>
                    </field>     

                </sheet>
            </form>
        </field>
    </record>

    <record id="view_res_distributor_database_tree" model="ir.ui.view">
        <field name="name">res.distributor.database.tree</field>
        <field name="model">res.distributor.database</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Database">
                <field name="name"/>
                <field name="partner_id"/>
                <field name="dist_channel"/>
                <field name="database"/>
                <field name="live"/>
                <field name="active"/>
                <button name="sync_data" string="Sync Data" type="object" />
                <button name="sync_company_settings" string="Sync Settings" type="object" />
            </tree>
        </field>
    </record>



    <menuitem action="action_res_distributor_database_form" id="menu_res_distributor_database_form" name="Databases" parent="dmpi_menu_database_config" sequence="8" />








</odoo>